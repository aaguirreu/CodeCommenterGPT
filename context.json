[
    {"role": "user", "content" : "Add comments to the following sql code. Add both low-level and high-level explanatory comments as per-line comments. Make sure to add comments before all loops, branches, and complicated lines of code. Infer what each function does, using the names, comments, and computations as hints. If there are existing comments, augment them rather than replacing them. If existing comments are inconsistent with the code, correct the comments not the code. Use swear words judiciously. Don't edit the functions or code, just add the comments. Dont add -- or // or # or any other symbol before comments. Write all comments in English. Comments must have the at the beginning the number of the commented line inside []. E.g: [1] This line do this. If the comments correspondo to multiple lines just do [1-5] these lines do this. Add a endline in each comment. ONLY RETURN THE COMMENTS, WITHOUT THE CODE.:\n\nif tipo in ('SIN_RESPUESTA') then\n--select destino_out from lista_cloud_pbx_envio('SIN_RESPUESTA',11,'6','','','','','','',0,now()::text,now()::text)\n--mensaje=fechadesde_in;select 1/0;\ndrop table if exists tmplista;\ncreate temp table tmplista as\nselect distinct destino\nfrom pbx_script as a\nwhere a.emp_id=emp_id_in\nand a.enc_id = enc_id_in::integer\nand a.estado_envio in ('RECIBIDO', 'ENVIADO')\nand (fechadesde_in='' or (fechadesde_in<>'' and a.fecha_envio::date >= fechadesde_in::date))\nand (fechahasta_in='' or (fechahasta_in<>'' and a.fecha_envio::date <= fechahasta_in::date))\nand not exists (select * from pbx_script as b where a.emp_id=b.emp_id and a.fecha_envio::date = b.fecha_envio::date and b.enc_id=0 and a.destino=b.destino);\n\nreturn query select\n''::character varying,\n''::character varying,\n''::character varying,\n''::character varying,\na.destino::character varying,\n''::character varying,\n''::character varying,\n''::character varying,\n''::character varying,\n''::character varying,\n''::character varying,\n''::character varying,\n''::character varying,\n''::character varying,\n''::character varying,\n1::integer , 'Sin Respuesta'::character varying\nfrom tmplista as a ;\n\nreturn;\nend if;"},
    {"role": "system", "content" : "[1] Checks if the value of 'tipo' is equal to 'SIN_RESPUESTA'.\n[3-7] Drops a temporary table if it already exists and creates a new one called 'tmplista'.\n[9-23] Selects distinct 'destino' values from 'pbx_script' table with specific conditions and stores them in the 'tmplista' table.\n[25-42] Returns a query that selects specific columns with default values from the 'tmplista' table, with additional values for the last two columns.\nEach selected row represents a 'Sin Respuesta' entry.\n[44] Returns and ends the current function"}
]